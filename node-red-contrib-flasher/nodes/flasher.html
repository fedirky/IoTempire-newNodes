<!-- BODY -->
<script type="text/html" data-template-name="flasher">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Label (optional)">
  </div>

  <div class="form-row">
    <label for="node-input-folder"><i class="fa fa-folder-open"></i> Folder</label>
    <input type="text" id="node-input-folder" placeholder="~/iot-systems/demo01">
  </div>

  <div class="form-row">
    <label for="node-input-nodeName"><i class="fa fa-cube"></i> Node</label>
    <input type="text" id="node-input-nodeName" placeholder="test01">
  </div>

  <div class="form-row">
    <label for="node-input-port"><i class="fa fa-plug"></i> Serial Port</label>
    <input type="text" id="node-input-port" placeholder="/dev/ttyUSB0">
  </div>
</script>

<!-- HELP -->
<script type="text/html" data-help-name="flasher">
  <p>Flashes the selected node via <code>deploy serial</code>.</p>
  <p>You choose a <strong>Folder</strong> and inside it a <strong>Node</strong> name; the full path will be <code>&lt;folder&gt;/&lt;node&gt;</code>.</p>
  <p>Alternatively, override at runtime via <code>msg.folder</code>, <code>msg.nodeName</code> or <code>msg.port</code>.</p>
</script>

<!-- EXAMPLES -->
<script type="text/html" data-examples-name="flasher">
  <ol>
    <li>Inject → flashes <code>~/iot-systems/demo01/test01</code> on <code>/dev/ttyUSB0</code>.</li>
    <li>Send <code>msg.nodeName = 'another'</code> → flashes <code>~/iot-systems/demo01/another</code>.</li>
  </ol>
</script>

<script type="text/javascript">
  RED.nodes.registerType('flasher', {
    category: 'network',
    color: '#d65a31',
    icon: 'fa-microchip',
    inputs: 1,
    outputs: 1,
    defaults: {
      name:     { value:"" },
      folder:   { value:"~/iot-systems/demo01" },
      nodeName: { value:"test01" },
      port:     { value:"/dev/ttyUSB0" }
    },
    label: function() {
      return this.name||`flasher ${this.nodeName}`;
    }
  });
</script>

